"0","# data cleansing part 1"
"0","results_p1 <- results_raw %>%"
"0",""
"0",""
"0","  filter("
"0","    # remove records where athlete ID is missing"
"0","    !is.na(athleteID) &"
"0","      # keep results from 6 most recent Games"
"0","      c_EditionCity %in% c('Atlanta',"
"0","                           'Sydney',"
"0","                           'Athens',"
"0","                           'Beijing',"
"0","                           'London',"
"0","                           'Rio de Janeiro',"
"0","                           'Tokyo') &"
"0","      year(Start_date) >= 1996) %>%"
"0",""
"0","  # combine team and individual columns"
"0","  mutate("
"0","    Age = ifelse(!is.na(Age), Age, Age_team),"
"0",""
"0","    # remove gender info from Discipline"
"0","    Discipline = gsub(' - Open','',gsub(' - Men','',gsub(' - Women','',gsub(' - Mixed','',Discipline)))),"
"0",""
"0","    # combine athlete ID and phase_result_id to make athleteResultID (unique identifier)"
"0","    athleteResultID = paste0(phase_result_id, athleteID),"
"0",""
"0","    Year = year(Start_date)"
"0","  ) %>%"
"0",""
"0","  # calculate age where Age is missing but DOB is provided"
"0","  mutate( Age = ifelse(is.na(Age) & !is.na(DOB), floor((Start_date-DOB)/365), Age) ) %>%"
"0",""
"0","  # remove redundant and unwanted columns"
"0","  select(-EventPhaseName,"
"0","         -DOB,"
"0","         -Age_team,"
"0","         -Person,"
"0","         -Person_team,"
"0","         -Start_date,"
"0","         -End_date,"
"0","         -c_Result,"
"0","         -edition_modifydate,"
"0","         -result_modifydate,"
"0","         -person_modifydate,"
"0","         -team_modifyDate,"
"0","         -n_CompetitionID,"
"0","         -c_EditionCountry) %>%"
"0",""
"0","  # identify NSWIS results by joining nswisResults data"
"0","  left_join(nswisResults, by=c('athleteResultID'='athleteResultid')) %>%"
"0","  mutate(nswisResult = ifelse(is.na(nswisResult),FALSE,nswisResult))"
